(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-UpdateUserInfo-UpdateUserInfo"],{"030e":function(t,e,i){"use strict";var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i("5530"));i("96cf");var n=a(i("1da1")),s=a(i("6aa2")),h={data:function(){return{id:0,url:"",userinfo:{nickname:"",email:"",user_pic:""},oldUser_pic:"",rules:{nickname:{rules:[{required:!0,errorMessage:"昵称不能为空"}]},email:{rules:[{required:!0,errorMessage:"密码不能为空"},{format:"email",errorMessage:"输入正确的邮箱"}]}}}},components:{kpsImageCutter:s.default},onLoad:function(t){this.id=t.id,this.getUserInfo()},methods:{getUserInfo:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(uni.getStorageSync("token")){e.next=4;break}return uni.showToast({title:"请登录！"}),uni.navigateTo({url:"/pages/Login/Login"}),e.abrupt("return");case 4:return e.next=6,t.$myRequest({url:"/my/userinfo"});case 6:i=e.sent,0==i.data.status?(t.userinfo=i.data.data,t.oldUser_pic=i.data.data.user_pic):uni.showToast({title:"网络出现问题！"});case 8:case"end":return e.stop()}}),e)})))()},update:function(t){var e=this;this.$refs[t].validate().then(function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(i){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$myRequest({url:"/my/updateuserinfo",method:"POST",data:{id:e.id,nickname:e.userinfo.nickname,email:e.userinfo.email}});case 2:if(a=t.sent,e.oldUser_pic===e.userinfo.user_pic){t.next=6;break}return t.next=6,e.$myUpload({url:"/my/upload/userpic",filePath:e.userinfo.user_pic,name:"user_pic"});case 6:uni.showToast({title:a.data.message}),0==a.data.status&&uni.switchTab({url:"/pages/Mine/Mine"});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){uni.showToast({title:result.data.message})}))},quit:function(){uni.switchTab({url:"/pages/Mine/Mine"})},updateImg:function(){var t=this;uni.chooseImage({count:1,success:function(e){t.url=e.tempFilePaths[0]}})},onok:function(t){this.userinfo=(0,o.default)((0,o.default)({},this.userinfo),{},{user_pic:t.path}),this.url=""},oncancel:function(){this.url=""}}};e.default=h},"04bc":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".ksp-image-cutter[data-v-f2b417d4]{position:absolute;width:100%;height:100%;top:0;bottom:0;z-index:1000}.toolbar[data-v-f2b417d4]{position:absolute;width:100%;height:%?100?%;left:%?0?%;bottom:%?0?%;box-sizing:border-box;border-bottom:1px solid silver;background:#f8f8f8}.btn-cancel[data-v-f2b417d4]{position:absolute;left:%?100?%;top:%?12?%;font-size:%?30?%;line-height:%?30?%;padding:%?20?%;color:#333}.btn-ok[data-v-f2b417d4]{position:absolute;right:%?100?%;top:%?12?%;font-size:%?30?%;line-height:%?30?%;padding:%?20?%;color:#333}.body[data-v-f2b417d4]{position:absolute;left:%?0?%;right:%?0?%;top:%?0?%;bottom:%?100?%;background:#000;overflow:hidden}.mask[data-v-f2b417d4]{position:absolute;left:%?0?%;right:%?0?%;top:%?0?%;bottom:%?0?%;background:#000;opacity:.4}.plank[data-v-f2b417d4]{position:absolute;left:%?0?%;right:%?0?%;top:%?0?%;bottom:%?0?%}.image[data-v-f2b417d4]{position:absolute}.frame[data-v-f2b417d4]{position:absolute}.canvas[data-v-f2b417d4]{position:absolute;display:block;left:0;top:0}.rect[data-v-f2b417d4]{position:absolute;left:-2px;top:-2px;width:100%;height:100%;border:2px solid #fff}.line-one[data-v-f2b417d4]{position:absolute;width:100%;height:1px;background:#fff;left:0;top:33.3%}.line-two[data-v-f2b417d4]{position:absolute;width:100%;height:1px;background:#fff;left:0;top:66.7%}.line-three[data-v-f2b417d4]{position:absolute;width:1px;height:100%;background:#fff;top:0;left:33.3%}.line-four[data-v-f2b417d4]{position:absolute;width:1px;height:100%;background:#fff;top:0;left:66.7%}.frame-left[data-v-f2b417d4]{position:absolute;height:100%;width:8px;left:-4px;top:0}.frame-right[data-v-f2b417d4]{position:absolute;height:100%;width:8px;right:-4px;top:0}.frame-top[data-v-f2b417d4]{position:absolute;width:100%;height:8px;top:-4px;left:0}.frame-bottom[data-v-f2b417d4]{position:absolute;width:100%;height:8px;bottom:-4px;left:0}.frame-left-top[data-v-f2b417d4]{position:absolute;width:20px;height:20px;left:-6px;top:-6px;border-left:4px solid red;border-top:4px solid red}.frame-left-bottom[data-v-f2b417d4]{position:absolute;width:20px;height:20px;left:-6px;bottom:-6px;border-left:4px solid red;border-bottom:4px solid red}.frame-right-top[data-v-f2b417d4]{position:absolute;width:20px;height:20px;right:-6px;top:-6px;border-right:4px solid red;border-top:4px solid red}.frame-right-bottom[data-v-f2b417d4]{position:absolute;width:20px;height:20px;right:-6px;bottom:-6px;border-right:4px solid red;border-bottom:4px solid red}",""]),t.exports=e},"1df8":function(t,e,i){"use strict";var a=i("ff96"),o=i.n(a);o.a},2442:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var a={uniForms:i("8908").default,uniFormsItem:i("3415").default,uniEasyinput:i("c610").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"login"},[i("v-uni-view",{staticClass:"userinfo"},[i("v-uni-image",{staticClass:"user_pic",attrs:{src:t.userinfo.user_pic,mode:""}}),i("v-uni-button",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updateImg.apply(void 0,arguments)}}},[t._v("更换头像")]),i("kps-image-cutter",{attrs:{url:t.url,fixed:!0,blob:!1,Width:500,Height:500},on:{ok:function(e){arguments[0]=e=t.$handleEvent(e),t.onok.apply(void 0,arguments)},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.oncancel.apply(void 0,arguments)}}})],1),i("uni-forms",{ref:"valiForm",attrs:{rules:t.rules,modelValue:t.userinfo}},[i("uni-forms-item",{attrs:{name:"nickname"}},[i("uni-easyinput",{attrs:{placeholder:"请输入昵称"},model:{value:t.userinfo.nickname,callback:function(e){t.$set(t.userinfo,"nickname",e)},expression:"userinfo.nickname"}})],1),i("uni-forms-item",{attrs:{name:"email"}},[i("uni-easyinput",{attrs:{placeholder:"请输入邮箱"},model:{value:t.userinfo.email,callback:function(e){t.$set(t.userinfo,"email",e)},expression:"userinfo.email"}})],1)],1),i("v-uni-button",{staticClass:"submit_btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.update("valiForm")}}},[t._v("修改")]),i("v-uni-button",{staticClass:"quit",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.quit.apply(void 0,arguments)}}},[t._v("取消")])],1)},n=[]},"52ec":function(t,e,i){var a=i("a6cd");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("e419dd3a",a,!0,{sourceMap:!1,shadowMode:!1})},"6aa2":function(t,e,i){"use strict";i.r(e);var a=i("a8d8"),o=i("ef5f");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("1df8");var s,h=i("f0c5"),r=Object(h["a"])(o["default"],a["b"],a["c"],!1,null,"f2b417d4",null,!1,a["a"],s);e["default"]=r.exports},a6cd:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.login[data-v-e4d7a1c2]{width:100%;padding:%?40?% %?20?%}.login .userinfo[data-v-e4d7a1c2]{width:100%;border-radius:%?10?%;display:flex;flex-direction:column;align-items:center;padding:%?35?% 0;background-color:#fff;margin-bottom:%?20?%}.login .userinfo .user_pic[data-v-e4d7a1c2]{width:%?200?%;height:%?200?%;border-radius:50%;margin-bottom:%?20?%}.login .userinfo .btn[data-v-e4d7a1c2]{background-color:#87ceeb;color:#fff}.login .title[data-v-e4d7a1c2]{font-size:%?60?%;margin-bottom:%?50?%;color:#87ceeb;text-align:center}.login .submit_btn[data-v-e4d7a1c2],\n.login .quit[data-v-e4d7a1c2]{background-color:#87ceeb;color:#fff;margin-bottom:%?20?%}.login .quit[data-v-e4d7a1c2]{background-color:pink}',""]),t.exports=e},a8d8:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.url,expression:"url"}],staticClass:"ksp-image-cutter"},[i("v-uni-canvas",{style:{width:t.target.width+"px",height:t.target.height+"px"},attrs:{"canvas-id":"target"}}),i("v-uni-view",{staticClass:"body"},[t.url?i("v-uni-image",{staticClass:"image",style:{left:t.image.left+"px",top:t.image.top+"px",width:t.image.width+"px",height:t.image.height+"px"},attrs:{src:t.url},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)}}}):t._e(),t.mask.show?i("v-uni-view",{staticClass:"mask"}):t._e(),i("v-uni-view",{staticClass:"plank",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"plank")},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchEnd.apply(void 0,arguments)},touchcancel:function(e){arguments[0]=e=t.$handleEvent(e),t.touchCancel.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"frame",style:{left:t.frame.left+"px",top:t.frame.top+"px",width:t.frame.width+"px",height:t.frame.height+"px"},on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"frame")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}},[t.mask.show?i("v-uni-canvas",{staticClass:"canvas",style:{width:t.frame.width+"px",height:t.frame.height+"px"},attrs:{"canvas-id":"canvas"}}):t._e(),i("v-uni-view",{staticClass:"rect"}),i("v-uni-view",{staticClass:"line-one"}),i("v-uni-view",{staticClass:"line-two"}),i("v-uni-view",{staticClass:"line-three"}),i("v-uni-view",{staticClass:"line-four"}),i("v-uni-view",{staticClass:"frame-left",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"left")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-right",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"right")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-top",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"top")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-bottom",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"bottom")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-left-top",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"left-top")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-left-bottom",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"left-bottom")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-right-top",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"right-top")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-right-bottom",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"right-bottom")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}})],1)],1)],1),i("v-uni-view",{staticClass:"toolbar"},[i("v-uni-button",{staticClass:"btn-cancel",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.oncancle.apply(void 0,arguments)}}},[t._v("返回")]),i("v-uni-button",{staticClass:"btn-ok",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onok.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)},n=[]},b05a:function(t,e,i){"use strict";i.r(e);var a=i("2442"),o=i("f496");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("e9e1");var s,h=i("f0c5"),r=Object(h["a"])(o["default"],a["b"],a["c"],!1,null,"e4d7a1c2",null,!1,a["a"],s);e["default"]=r.exports},e9e1:function(t,e,i){"use strict";var a=i("52ec"),o=i.n(a);o.a},ef5f:function(t,e,i){"use strict";i.r(e);var a=i("efc5"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},efc5:function(t,e,i){"use strict";i("ace4"),i("a9e3"),i("d3b7"),i("ac1f"),i("3ca3"),i("466d"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("2954"),i("649e"),i("219c"),i("b39a"),i("72f7"),i("ddb0"),i("2b3d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{url:{type:String,default:""},fixed:{type:Boolean,default:!1},width:{type:Number,default:200},height:{type:Number,default:200},maxWidth:{type:Number,default:1024},maxHeight:{type:Number,default:1024},blob:{type:Boolean,default:!0}},data:function(){return{mask:{show:!1},frame:{left:50,top:50,width:this.width,height:this.height},image:{left:20,top:20,width:300,height:400},real:{width:100,height:100},target:{width:this.width,height:this.height},touches:[],type:"",start:{frame:{left:0,top:0,width:0,height:0},image:{left:0,top:0,width:0,height:0}},timeoutId:-1,context:null}},mounted:function(){this.$el.addEventListener("touchmove",(function(t){t.preventDefault()})),this.context=uni.createCanvasContext("canvas",this),this.targetContext=uni.createCanvasContext("target",this)},methods:{imageLoad:function(t){var e=this;this.mask.show=!0,this.real.width=t.detail.width,this.real.height=t.detail.height,this.image.width=t.detail.width,this.image.height=t.detail.height,this.frame.width=this.width,this.frame.height=this.height,this.fixed||(this.frame.width=this.image.width,this.frame.height=this.image.height);var i=uni.createSelectorQuery().in(this);i.select(".body").boundingClientRect((function(t){var i=t.width,a=t.height,o=e.frame.width,n=e.frame.height,s=.8*i,h=.8*a,r=s/o,f=h/n,u=r;r<f&&(u=f),s=o*u,h=n*u;var l=(i-s)/2,d=(a-h)/2;e.frame.width=s,e.frame.height=h,e.frame.left=l,e.frame.top=d;var c=e.image.width,m=e.image.height;r=s/c,f=h/m,u=r,r<f&&(u=f),e.image.width=c*u,e.image.height=m*u,e.image.left=(i-e.image.width)/2,e.image.top=(a-e.image.height)/2,setTimeout((function(){e.trimImage()}),100)})).exec()},touchHandle:function(){},touchStart:function(t,e){this.stopTime(),this.mask.show=!1,0==this.touches.length&&(this.type=e,this.start.frame.left=this.frame.left,this.start.frame.top=this.frame.top,this.start.frame.width=this.frame.width,this.start.frame.height=this.frame.height,this.start.image.left=this.image.left,this.start.image.top=this.image.top,this.start.image.width=this.image.width,this.start.image.height=this.image.height);for(var i=t.changedTouches,a=0;a<i.length;a++){var o=i[a];this.touches.push(o)}},touchMove:function(t){this.stopTime(),t.preventDefault();var e=t.touches;if(1==this.touches.length)"plank"==this.type||"frame"==this.type||this.fixed?this.moveImage(this.touches[0],e[0]):this.scaleFrame(this.touches[0],e[0],this.type);else if(2==this.touches.length&&2==e.length){var i=this.touches[0],a=this.touches[1],o=e[0],n=e[1];if(i.identifier!=o.identifier){var s=o;o=n,n=s}this.scaleImage(i,a,o,n)}},touchEnd:function(t){this.type="",this.touches=[],this.startTime()},touchCancel:function(t){this.type="",this.touches=[],this.startTime()},startTime:function(){var t=this;this.stopTime(),this.timeoutId=setTimeout((function(){t.trimImage()}),800)},stopTime:function(){this.timeoutId>=0&&(clearTimeout(this.timeoutId),this.timeoutId=-1)},trimImage:function(){var t=this;this.mask.show=!0;var e=uni.createSelectorQuery().in(this);e.select(".body").boundingClientRect((function(e){var i=e.width,a=e.height,o=t.frame.width,n=t.frame.height,s=.8*i,h=.8*a,r=s/o,f=h/n,u=r;r>f&&(u=f),s=o*u,h=n*u;var l=(i-s)/2,d=(a-h)/2,c=l-t.frame.left+(t.frame.left-t.image.left)*(1-u),m=d-t.frame.top+(t.frame.top-t.image.top)*(1-u);t.frame.width=s,t.frame.height=h,t.frame.left=l,t.frame.top=d,t.image.width*=u,t.image.height*=u,t.image.left+=c,t.image.top+=m})).exec(),setTimeout((function(){var e=t.image.width/t.real.width,i=(t.frame.left-t.image.left)/e,a=(t.frame.top-t.image.top)/e,o=t.frame.width/e,n=t.frame.height/e;t.context.drawImage(t.url,i,a,o,n,0,0,t.frame.width,t.frame.height),t.context.draw(!1)}),100)},moveImage:function(t,e){var i=e.clientX-t.clientX,a=e.clientY-t.clientY;this.image.left=this.start.image.left+i,this.image.top=this.start.image.top+a,this.image.left>this.frame.left&&(this.image.left=this.frame.left),this.image.top>this.frame.top&&(this.image.top=this.frame.top),this.image.left+this.image.width<this.frame.left+this.frame.width&&(this.image.left=this.frame.left+this.frame.width-this.image.width),this.image.top+this.image.height<this.frame.top+this.frame.height&&(this.image.top=this.frame.top+this.frame.height-this.image.height)},scaleImage:function(t,e,i,a){var o=t.clientX,n=t.clientY,s=e.clientX,h=e.clientY,r=i.clientX,f=i.clientY,u=a.clientX,l=a.clientY,d=Math.sqrt((o-s)*(o-s)+(n-h)*(n-h)),c=Math.sqrt((r-u)*(r-u)+(f-l)*(f-l)),m=(o+s)/2,p=(n+h)/2,g=(r+u)/2,v=(f+l)/2,b=g-m,w=v-p,x=c/d;this.start.image.width*x<this.frame.width&&(x=this.frame.width/this.start.image.width),this.start.image.height*x<this.frame.height&&(x=this.frame.height/this.start.image.height),this.start.image.width*x<this.frame.width&&(x=this.frame.width/this.start.image.width),this.image.left=this.start.image.left+b-(m-this.start.image.left)*(x-1),this.image.top=this.start.image.top+w-(p-this.start.image.top)*(x-1),this.image.width=this.start.image.width*x,this.image.height=this.start.image.height*x,this.image.left>this.frame.left&&(this.image.left=this.frame.left),this.image.top>this.frame.top&&(this.image.top=this.frame.top),this.image.left+this.image.width<this.frame.left+this.frame.width&&(this.image.left=this.frame.left+this.frame.width-this.image.width),this.image.top+this.image.height<this.frame.top+this.frame.height&&(this.image.top=this.frame.top+this.frame.height-this.image.height)},scaleFrame:function(t,e,i){var a=e.clientX-t.clientX,o=e.clientY-t.clientY,n=this.start.frame.left,s=this.start.frame.top,h=this.start.frame.left+this.start.frame.width,r=this.start.frame.top+this.start.frame.height;"left"==i?n+=a:"right"==i?h+=a:"top"==i?s+=o:"bottom"==i?r+=o:"left-top"==i?(n+=a,s+=o):"left-bottom"==i?(n+=a,r+=o):"right-top"==i?(h+=a,s+=o):"right-bottom"==i&&(h+=a,r+=o),n<this.image.left&&(n=this.image.left),s<this.image.top&&(s=this.image.top),h>this.image.left+this.image.width&&(h=this.image.left+this.image.width),r>this.image.top+this.image.height&&(r=this.image.top+this.image.height),this.frame.left=n,this.frame.top=s,this.frame.width=h-n,this.frame.height=r-s},parseBlob:function(t){for(var e=t.split(","),i=e[0].match(/:(.*?);/)[1],a=atob(e[1]),o=a.length,n=new Uint8Array(o),s=0;s<o;s++)n[s]=a.charCodeAt(s);var h=URL||webkitURL;return h.createObjectURL(new Blob([n],{type:i}))},onok:function(){var t=this,e=this.image.width/this.real.width,i=(this.frame.left-this.image.left)/e,a=(this.frame.top-this.image.top)/e,o=this.frame.width/e,n=this.frame.height/e,s=o,h=n;if(this.fixed)s=this.width/2,h=this.height/2;else{if(s>this.maxWidth/2){var r=this.maxWidth/2/s;s*=r,h*=r}if(h>this.maxHeight/2){r=this.maxHeight/2/h;h*=r,s*=r}}this.target.width=s,this.target.height=h,uni.showLoading({title:"正在裁剪"}),setTimeout((function(){t.targetContext.drawImage(t.url,i,a,o,n,0,0,s,h),t.targetContext.draw(!1,(function(){uni.canvasToTempFilePath({canvasId:"target",success:function(e){var i=e.tempFilePath;t.blob&&(i=t.parseBlob(i)),t.$emit("ok",{path:i})},fail:function(t){console.log(t)},complete:function(){uni.hideLoading()}},t)}))}),100)},oncancle:function(){this.$emit("cancel")}}};e.default=a},f496:function(t,e,i){"use strict";i.r(e);var a=i("030e"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},ff96:function(t,e,i){var a=i("04bc");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("0a829a24",a,!0,{sourceMap:!1,shadowMode:!1})}}]);